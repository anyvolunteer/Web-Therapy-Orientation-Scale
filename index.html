<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿ƒç†å’¨è¯¢å–å‘è¯„ä¼°é‡è¡¨</title>
    <link rel="stylesheet" href="guide.css">
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .progress-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 20px 0;
            height: 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .progress-bar {
            height: 100%;
            background-color: #3498db;
            border-radius: 5px;
            width: 0%;
            transition: width 0.3s;
            position: relative;
        }
        .progress-text {
            position: absolute;
            right: 10px;
            color: white;
            font-weight: bold;
            line-height: 20px;
            font-size: 12px;
        }
        h1, h2, h3 {
            color: #2c3e50;
            text-align: center;
        }
        .instructions {
            background-color: #fff;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .question {
            background-color: #fff;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .question-number {
            font-weight: bold;
            margin-right: 10px;
            color: #3498db;
        }
        .options {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        .option {
            text-align: center;
            flex: 1;
        }
        .option label {
            display: block;
            cursor: pointer;
            padding: 5px;
            border-radius: 3px;
            transition: background-color 0.3s;
        }
        .option label:hover {
            background-color: #e8f4fc;
        }
        .option input[type="radio"] {
            margin-right: 5px;
        }
        .btn-container {
            text-align: center;
            margin: 20px 0;
        }
        .btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .btn:hover {
            background-color: #2980b9;
        }
        .results {
            display: none;
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 12px 15px;
            border: 1px solid #ddd;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .calculation {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .highest {
            background-color: #d4edda;
        }
        .answered {
            background-color: #e8f4fc;
        }
        .current-focus {
            border-left: 4px solid #3498db;
            box-shadow: 0 0 8px rgba(52, 152, 219, 0.5);
        }
        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        .btn-secondary {
            background-color: #6c757d;
        }
        .btn-secondary:hover {
            background-color: #5a6268;
        }
    </style>
</head>
<body>
    <h1>å¿ƒç†å’¨è¯¢å–å‘è¯„ä¼°é‡è¡¨</h1>
    
    <div class="progress-container">
        <div class="progress-bar">
            <div class="progress-text">0/76</div>
        </div>
    </div>
    
    <div class="instructions">
        <h3>æŒ‡å¯¼è¯´æ˜</h3>
        <p>è¯·æ ¹æ®æ‚¨å¯¹æ¯ä¸ªé™ˆè¿°çš„è®¤åŒç¨‹åº¦ï¼Œé€‰æ‹©ç›¸åº”çš„é€‰é¡¹ï¼š</p>
        <p>1 = å¼ºçƒˆä¸åŒæ„ï¼Œ2 = ä¸åŒæ„ï¼Œ3 = è½»å¾®ä¸åŒæ„ï¼Œ4 = ä¸­ç«‹ï¼Œ5 = è½»å¾®åŒæ„ï¼Œ6 = åŒæ„ï¼Œ7 = å¼ºçƒˆåŒæ„</p>
    </div>
    
    <div class="control-buttons">
        <button id="shuffle" class="btn btn-secondary">æ‰“ä¹±é¢˜ç›®é¡ºåº</button>
        <button id="restore" class="btn btn-secondary">æ¢å¤é»˜è®¤é¡ºåº</button>
        <button id="test-fill" class="btn btn-secondary">ä¸€é”®æµ‹è¯•å¡«å……</button>
    </div>
    
    <div id="questionnaire">
        <!-- é—®é¢˜å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
    </div>
    
    <div class="btn-container">
        <button id="calculate" class="btn">è®¡ç®—ç»“æœ</button>
    </div>
    
    <div id="results" class="results">
        <h2>è¯„ä¼°ç»“æœ</h2>
        <div id="calculation-details"></div>
        <table id="results-table">
            <thead>
                <tr>
                    <th>å¿ƒç†å’¨è¯¢å–å‘</th>
                    <th>å¾—åˆ†</th>
                </tr>
            </thead>
            <tbody>
                <!-- ç»“æœå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </tbody>
        </table>
    </div>
    
    <script>
        // é‡è¡¨é—®é¢˜æ•°æ®
        const originalQuestions = [
            { id: 1, text: "ç§»æƒ…åœ¨å¿ƒç†å’¨è¯¢ä¸­å¾ˆæœ‰ä»·å€¼ï¼Œå› ä¸ºå®ƒä¸ºæ¥è®¿è€…æä¾›äº†é‡æ–°ä½“éªŒç«¥å¹´æ—©æœŸæ„Ÿå—çš„æœºä¼šã€‚", eng_text: "Transference is valuable in therapy because it gives clients the opportunity to re-experience early childhood feelings." },
            { id: 2, text: "äººæ ¼çš„ç¤¾ä¼šå†³å®šå› ç´ æ¯”å¿ƒç†æ€§å†³å®šå› ç´ æ›´ä¸ºé‡è¦ã€‚", eng_text: "Social determinants of personality are more important than psychological determinants." },
            { id: 3, text: "æ²»ç–—å¸ˆåº”å½“æŒ‘æˆ˜æ¥è®¿è€…ä¸çœŸå®çš„ç”Ÿæ´»æ–¹å¼ã€‚", eng_text: "Therapists should challenge clients' inauthentic ways of living." },
            { id: 4, text: "æˆ‘å–œæ¬¢è®¾è®¡å®éªŒæ¥å¢å¼ºæ¥è®¿è€…å¯¹è‡ªèº«è¡Œä¸ºçš„è‡ªæˆ‘æ„è¯†ä»¥åŠä»–ä»¬å¦‚ä½•è¿›è¡Œè¿™äº›è¡Œä¸ºã€‚", eng_text: "I like to design experiments to increase clients' self-awareness of their behaviors and how they do them." },
            { id: 5, text: "è¯¢é—®æ¥è®¿è€…æœ€æ—©æœŸçš„è®°å¿†æ˜¯å¾ˆé‡è¦çš„ã€‚", eng_text: "It is important to ask clients about their earliest memories." },
            { id: 6, text: "ä»¥å…·ä½“ã€æ˜ç¡®å’Œå®¢è§‚çš„æ–¹å¼é™ˆè¿°æ²»ç–—ç›®æ ‡å¯¹å¸®åŠ©æ¥è®¿è€…å¾ˆé‡è¦ã€‚", eng_text: "It is important to state therapeutic goals in concrete, specific, and objective terms to help clients." },
            { id: 7, text: "è™½ç„¶è¢«ä»–äººçˆ±å’Œæ¥çº³æ˜¯ä»¤äººå‘å¾€çš„ï¼Œä½†è¿™å¹¶éå¿…è¦ã€‚", eng_text: "Although it is desirable to be loved and accepted by others, it is not necessary." },
            { id: 8, text: "æ²»ç–—åº”å¼ºè°ƒæ¥è®¿è€…ä¸å…¶å®¶åº­çš„äº’åŠ¨ã€‚", eng_text: "Therapy should emphasize clients' interactions with their families." },
            { id: 9, text: "å¤§å¤šæ•°æ¥è®¿è€…çš„åŸºæœ¬é—®é¢˜æ˜¯ä»–ä»¬è¦ä¹ˆå¤„äºä¸€æ®µä¸æ»¡æ„çš„ç°æœ‰å…³ç³»ä¸­ï¼Œè¦ä¹ˆç¼ºä¹ä¸€æ®µé‡è¦çš„å…³ç³»ã€‚", eng_text: "The basic problem for most clients is that they are either in an unsatisfying existing relationship or lack an important relationship." },
            { id: 10, text: "è‰¯å¥½çš„æ¥è®¿è€…-æ²»ç–—å¸ˆå…³ç³»æ˜¯è¡Œä¸ºæ”¹å˜å‘ç”Ÿçš„å¿…è¦ä½†éå……åˆ†æ¡ä»¶ã€‚", eng_text: "A good client-therapist relationship is a necessary but not sufficient condition for behavior change to occur." },
            { id: 11, text: "æ²»ç–—å¸ˆæä¾›çš„æ²»ç–—æ¡ä»¶æ¯”å…¶ä½¿ç”¨çš„æŠ€æœ¯æ›´ä¸ºé‡è¦ã€‚", eng_text: "The therapeutic conditions provided by the therapist are more important than the techniques used." },
            { id: 12, text: "æ²»ç–—çš„é€‚å½“ç›®æ ‡æ˜¯ç¤¾ä¼šå˜é©å’Œä¸ªäººå˜é©ã€‚", eng_text: "An appropriate goal of therapy is social change as well as individual change." },
            { id: 13, text: "å°½ç®¡æˆ‘ä»¬éƒ½ä¼šç”Ÿæ´»åœ¨ç”Ÿæ´»ä¸­é‡åˆ°æŸäº›æƒ…å†µï¼Œä½†æˆ‘ä»¬å¹¶éç¯å¢ƒçš„å—å®³è€…ã€‚æˆ‘ä»¬æ˜¯æˆ‘ä»¬é€‰æ‹©æˆä¸ºçš„æ ·å­ã€‚", eng_text: "Although we all encounter certain situations in life, we are not victims of our environment. We are who we choose to become." },
            { id: 14, text: "æ²»ç–—åº”å…³æ³¨æ¥è®¿è€…çš„æ„Ÿå—ã€å½“ä¸‹æ„è¯†ä»¥åŠæ„è¯†éšœç¢ã€‚", eng_text: "Therapy should focus on clients' feelings, present awareness, and blocks to awareness." },
            { id: 15, text: "è®¤çŸ¥æ˜¯æˆ‘ä»¬æ„Ÿå—å’Œè¡Œä¸ºçš„ä¸»è¦å†³å®šå› ç´ ã€‚", eng_text: "Cognition is the primary determinant of our emotions and behavior." },
            { id: 16, text: "å¤ªå¤šçš„æ²»ç–—å…³æ³¨é—®é¢˜è€Œéè§£å†³æ–¹æ¡ˆã€‚", eng_text: "Too much therapy focuses on problems rather than solutions." },
            { id: 17, text: "æ²»ç–—å¸ˆçš„ä¸€è‡´æ€§æˆ–çœŸè¯šæ€§æ˜¯å»ºç«‹æ²»ç–—å…³ç³»çš„æœ€é‡è¦æ¡ä»¶ä¹‹ä¸€ã€‚", eng_text: "The therapist's congruence or genuineness is one of the most important conditions for establishing a therapeutic relationship." },
            { id: 18, text: "äº†è§£æ¥è®¿è€…åœ¨åŸç”Ÿå®¶åº­ä¸­çš„ä½ç½®å¾ˆé‡è¦ï¼Œè¿™æœ‰åŠ©äºæˆ‘æ›´å¥½åœ°ç†è§£ä»–ä»¬åœ¨ç”Ÿæ´»ä¸­æ‰€é‡‡å–çš„è§’è‰²ã€‚", eng_text: "It is important to understand clients' positions in their family of origin to better understand the roles they take in life." },
            { id: 19, text: "åœ¨æ²»ç–—ä¸­ï¼Œæˆ‘è®¤ä¸ºæ¯”èµ·è°ˆè®ºæ„Ÿå—å’Œç»å†ï¼Œè®©æ¥è®¿è€…åœ¨æ²»ç–—è¿‡ç¨‹ä¸­é‡æ–°ä½“éªŒè¿™äº›æ„Ÿå—æ›´ä¸ºé‡è¦ã€‚", eng_text: "In therapy, I believe it is more important for clients to re-experience feelings in the therapy session than to talk about feelings and experiences." },
            { id: 20, text: "å½“å®¶åº­ä¸­çš„ä¸ªä½“å‡ºç°é—®é¢˜æ—¶ï¼Œæ²»ç–—å¸ˆå¯ä»¥é€šè¿‡æ£€æŸ¥å®¶åº­æ²Ÿé€šå’Œå…³ç³»é—®é¢˜æ¥æä¾›å¸®åŠ©ã€‚", eng_text: "When individuals in families have problems, therapists can help by examining family communication and relationship issues." },
            { id: 21, text: "å½“æ¥è®¿è€…ç†è§£å…¶é—®é¢˜çš„å†å²æ ¹æºï¼Œå¹¶æ˜ç¡®äº†ç«¥å¹´é—®é¢˜å¦‚ä½•å½±å“å½“å‰æƒ…å†µæ—¶ï¼Œä»–ä»¬æ›´å®¹æ˜“ç»ˆæ­¢æ²»ç–—ã€‚", eng_text: "Clients are more likely to terminate therapy when they understand the historical roots of their problems and how childhood issues affect their current situation." },
            { id: 22, text: "å¿ƒç†å’¨è¯¢çš„ä¸»è¦ä¸»é¢˜æ¶‰åŠæ„ä¹‰ã€è‡ªç”±ã€è´£ä»»ã€å­¤ç‹¬ã€ç–ç¦»ã€æ­»äº¡åŠå…¶å¯¹ç”Ÿæ´»çš„å½±å“ã€‚", eng_text: "The major themes of psychotherapy involve meaning, freedom, responsibility, isolation, alienation, death, and their impact on life." },
            { id: 23, text: "æ¯ä¸ªäººéƒ½å‘å±•å‡ºç‹¬ç‰¹çš„ç”Ÿæ´»æ–¹å¼ï¼Œæˆ‘å°†åœ¨æ²»ç–—ä¸­æ¢ç´¢è¿™ä¸€ç‚¹ã€‚", eng_text: "Each person develops a unique lifestyle, which I will explore in therapy." },
            { id: 24, text: "æ²»ç–—å¸ˆåº”é¼“åŠ±æ¥è®¿è€…å¯¹ä»–ä»¬åœ¨ä¸–ç•Œä¸­çš„é€‰æ‹©æ–¹å¼æ‰¿æ‹…è´£ä»»ã€‚", eng_text: "Therapists should encourage clients to take responsibility for how they choose in the world." },
            { id: 25, text: "æ²»ç–—å¸ˆé€šè¿‡æ¢å¤å¥åº·çš„å®¶åº­ç»„ç»‡ç»“æ„æ¥å¸®åŠ©æ¥è®¿è€…äº§ç”Ÿå˜åŒ–ã€‚", eng_text: "Therapists help clients create change by restoring healthy family organizational structures." },
            { id: 26, text: "æ²»ç–—çš„æœ€åŸºæœ¬ç›®æ ‡æ˜¯åˆ›é€ ä¸€ä¸ªå¿ƒç†å®‰å…¨çš„æ°›å›´ï¼Œä½¿æ¥è®¿è€…æ„Ÿåˆ°è¶³å¤Ÿå®‰å…¨ä»¥æ”¾ä¸‹é˜²å¾¡ã€‚", eng_text: "The most basic goal of therapy is to create a psychological atmosphere of safety where clients feel safe enough to drop their defenses." },
            { id: 27, text: "æ²»ç–—å¸ˆåº”ä»ä¸åŒçš„ç†è®ºä½“ç³»ä¸­é€‰æ‹©ï¼Œä»¥æ•´åˆå®ƒä»¬ã€‚", eng_text: "Therapists should select from different theoretical systems to integrate them." },
            { id: 28, text: "æ²»ç–—å¸ˆå’¨è¯¢æ¥è®¿è€…çš„å®¶åº­æˆå‘˜å¾ˆé‡è¦ã€‚", eng_text: "It is important for therapists to consult with family members of clients." },
            { id: 29, text: "å…³æ³¨æ¥è®¿è€…çš„å¼±ç‚¹å¾ˆå°‘èƒ½äº§ç”Ÿå“è¶Šã€‚å¦‚æœè¿½æ±‚å“è¶Šï¼Œå°±å¿…é¡»å…³æ³¨æ¥è®¿è€…çš„ä¼˜åŠ¿ã€‚", eng_text: "Focusing on clients' weaknesses rarely produces excellence. If excellence is pursued, one must focus on clients' strengths." },
            { id: 30, text: "å¦è®¤ã€å‹æŠ‘ã€ç†æ™ºåŒ–å’Œå…¶ä»–é˜²å¾¡æœºåˆ¶æ˜¯ç†è§£æ²»ç–—çš„æ ¸å¿ƒã€‚", eng_text: "Denial, repression, rationalization, and other defense mechanisms are central to understanding therapy." },
            { id: 31, text: "æ•™å¯¼æ¥è®¿è€…åº”å¯¹é—®é¢˜çš„æŠ€å·§å¾ˆé‡è¦ã€‚", eng_text: "It is important to teach clients skills for coping with problems." },
            { id: 32, text: "åœ¨æ²»ç–—æ–¹é¢æ²¡æœ‰ä¸€ç§æœ€ä½³ç†è®ºã€‚ï¼ˆæ•´åˆæ€§ï¼‰", eng_text: "There is no one best theory in terms of treatment. (Integrative)" },
            { id: 33, text: "æˆ‘ä¸è®¤ä¸ºæ²»ç–—å¸ˆåº”è¯¥åªç²¾é€šä¸€ç§å¿ƒç†å’¨è¯¢ç†è®ºã€‚", eng_text: "I do not believe that therapists should be skilled in only one theory of psychotherapy." },
            { id: 34, text: "äººä»¬è¿½æ±‚è‡ªæˆ‘å®ç°ï¼Œæ²»ç–—å¸ˆåº”è¯¥ç†Ÿç»ƒæŒæ¡ä¿ƒè¿›è¿™ä¸€è¿‡ç¨‹çš„æŠ€èƒ½ã€‚", eng_text: "People strive for self-actualization, and therapists should be skilled in facilitating this process." },
            { id: 35, text: "éç†æ€§ä¿¡å¿µæ˜¯æƒ…ç»ªå›°æ‰°çš„ä¸»è¦åŸå› ã€‚", eng_text: "Irrational beliefs are the primary cause of emotional disturbance." },
            { id: 36, text: "äººä»¬å­¦ä¹ é€‚åº”æ€§å’Œä¸é€‚åº”æ€§è¡Œä¸ºã€‚", eng_text: "People learn adaptive and maladaptive behaviors." },
            { id: 37, text: "æˆåŠŸçš„ç”Ÿæ´»ä¸ä¸ªä½“è¿½æ±‚å“è¶Šçš„ç¨‹åº¦ç›¸å…³ã€‚", eng_text: "Successful living is related to the degree to which individuals strive for excellence." },
            { id: 38, text: "æ¥è®¿è€…æ˜¯è‡ªèº«é—®é¢˜çš„ä¸“å®¶ï¼Œè€Œéæ²»ç–—å¸ˆã€‚", eng_text: "Clients are the experts on their problems, not therapists." },
            { id: 39, text: "äººç±»è¡Œä¸ºç”±ç¯å¢ƒä¸­çš„å¼ºåŒ–å’Œæƒ©ç½šæ¨¡å¼å†³å®šã€‚", eng_text: "Human behavior is determined by patterns of reinforcement and punishment in the environment." },
            { id: 40, text: "äº‹ä»¶æœ¬èº«ä¸ä¼šå¼•èµ·æƒ…ç»ªå›°æ‰°ã€‚ç›¸åï¼Œæ˜¯æˆ‘ä»¬å¯¹è¿™äº›äº‹ä»¶çš„è¯„ä»·å’Œä¿¡å¿µå¯¼è‡´äº†å›°æ‰°ã€‚", eng_text: "Events themselves do not cause emotional disturbance. Rather, it is our evaluations and beliefs about these events that cause disturbance." },
            { id: 41, text: "è¯„ä¼°æ¥è®¿è€…å½“å‰è¡Œä¸ºæ˜¯æ¥è®¿è€…çš„è´£ä»»ï¼Œè€Œéæ²»ç–—å¸ˆçš„è´£ä»»ã€‚", eng_text: "It is the client's responsibility to evaluate their current behavior, not the therapist's." },
            { id: 42, text: "ä»¥ä¸‹éƒ½æ˜¯åŸºæœ¬å¿ƒç†éœ€æ±‚ï¼šå½’å±æ„Ÿã€æƒåŠ›æ„Ÿã€è‡ªç”±æ„Ÿã€ä¹è¶£ã€‚", eng_text: "The following are all basic psychological needs: belonging, power, freedom, and fun." },
            { id: 43, text: "æœ‰æ—¶äººä»¬é€‰æ‹©è‡ªæˆ‘æ¯ç­æ€§è¡Œä¸ºã€‚", eng_text: "Sometimes people choose self-destructive behavior." },
            { id: 44, text: "åœ¨å’¨è¯¢ä¸­çŒè¾“å¸Œæœ›å¯¹æ¥è®¿è€…å¾ˆé‡è¦ã€‚", eng_text: "It is important to instill hope in clients in counseling." },
            { id: 45, text: "æ²»ç–—çš„ä¸€ä¸ªé€‚å½“ç›®æ ‡æ˜¯ä¸æ¥è®¿è€…è¿›è¡Œå¯¹è¯ï¼Œå¸®åŠ©ä»–ä»¬ä¸ºç”Ÿæ´»å’Œè¡Œä¸ºå‘å±•æ–°çš„æ„ä¹‰ã€‚", eng_text: "An appropriate goal of therapy is to engage in dialogue with clients to help them develop new meanings for living and behaving." },
            { id: 46, text: "æ¥è®¿è€…æœ‰æ—¶é™·å…¥ä¸€ç§ç”Ÿæ´»æ¨¡å¼ä¸­ï¼Œè¿™ç§æ¨¡å¼å……æ»¡é—®é¢˜ï¼Œä½†å·²ç»ä¸ºä»–ä»¬å·¥ä½œäº†ä¸€æ®µæ—¶é—´ã€‚", eng_text: "Clients sometimes get stuck in a pattern of living that is problematic but has worked for them for a while." },
            { id: 47, text: "å™äº‹å’¨è¯¢ç­–ç•¥çš„ç›®æ ‡æ˜¯å¸®åŠ©æ¥è®¿è€…åˆ›é€ æ›´ä»¤äººæ»¡æ„çš„æ•…äº‹ã€‚", eng_text: "The goal of narrative counseling strategies is to help clients create more satisfying stories." },
            { id: 48, text: "æ²»ç–—å¸ˆåº”è¢«è§†ä¸ºä¿¡æ¯çš„å”¯ä¸€æ¥æºä¹‹ä¸€ï¼Œè€Œéä¸“å®¶ã€‚", eng_text: "Therapists should be viewed as one source of information rather than as experts." },
            { id: 49, text: "å½“æœ‰è§‚ä¼—æ¬£èµå’Œæ”¯æŒè¿™äº›æ•…äº‹æ—¶ï¼Œæ¥è®¿è€…çš„æ•…äº‹ä¼šåœ¨ä»–ä»¬çš„ç”Ÿæ´»ä¸­å æ®ä¸»å¯¼åœ°ä½ã€‚", eng_text: "Clients' stories become dominant in their lives when there is an audience to appreciate and support these stories." },
            { id: 50, text: "æ²»ç–—åº”å¸®åŠ©æ¥è®¿è€…å‚ä¸å¤–åŒ–å¯¹è¯ã€‚", eng_text: "Therapy should help clients engage in externalizing conversations." },
            { id: 51, text: "é€šè¿‡è¯„ä¼°å®¶åº­æˆå‘˜ä¹‹é—´çš„äº’åŠ¨ï¼Œå¯ä»¥æœ€å¥½åœ°ç†è§£æ¥è®¿è€…ã€‚", eng_text: "Clients are best understood by assessing the interactions among family members." },
            { id: 52, text: "æ²»ç–—å¸ˆåº”è¯¥æ˜¯ç¤¾ä¼šå˜é©çš„ä»£ç†äººã€‚", eng_text: "Therapists should be agents of social change." },
            { id: 53, text: "å…³æ³¨æ¥è®¿è€…çš„ä¼˜åŠ¿æ¯”å…³æ³¨ç—…ç†å­¦æ›´é‡è¦ã€‚", eng_text: "It is more important to focus on clients' strengths than on pathology." },
            { id: 54, text: "å¤šå…ƒæ–‡åŒ–æ„è¯†å¯¹æœ‰æ•ˆå’¨è¯¢è‡³å…³é‡è¦ã€‚", eng_text: "Multicultural awareness is essential for effective counseling." },
            { id: 55, text: "æ²»ç–—å¸ˆåº”è¯¥å¸®åŠ©æ¥è®¿è€…è¯†åˆ«å’Œå»ºç«‹ä»–ä»¬çš„ä¼˜åŠ¿å’Œèµ„æºã€‚", eng_text: "Therapists should help clients identify and build on their strengths and resources." },
            { id: 56, text: "å¸Œæœ›æ˜¯æ²»ç–—æˆåŠŸçš„å…³é”®å› ç´ ã€‚", eng_text: "Hope is a key factor in successful therapy." },
            { id: 57, text: "ç«¥å¹´ç»å†å¯¹æˆäººè¡Œä¸ºæœ‰é‡å¤§å½±å“ã€‚", eng_text: "Childhood experiences have a significant impact on adult behavior." },
            { id: 58, text: "æˆ‘ç›¸ä¿¡'æ­¤æ—¶æ­¤åœ°'çš„ä½“éªŒæ¯”è¿‡å»çš„ç»å†æ›´é‡è¦ã€‚", eng_text: "I believe that 'here and now' experiences are more important than past experiences." },
            { id: 59, text: "æ— æ„è¯†è¿‡ç¨‹å½±å“è¡Œä¸ºã€‚", eng_text: "Unconscious processes influence behavior." },
            { id: 60, text: "æ²»ç–—å¸ˆå¿…é¡»äº†è§£æ–‡åŒ–å·®å¼‚å¦‚ä½•å½±å“æ²»ç–—è¿‡ç¨‹ã€‚", eng_text: "Therapists must understand how cultural differences affect the therapeutic process." },
            { id: 61, text: "æ²»ç–—å¸ˆçš„åŒç†å¿ƒå¯¹æ²»ç–—æˆåŠŸè‡³å…³é‡è¦ã€‚", eng_text: "The therapist's empathy is essential for successful therapy." },
            { id: 62, text: "æ¥è®¿è€…éœ€è¦å­¦ä¹ æ›´å¥½çš„è¡Œä¸ºé€‰æ‹©ã€‚", eng_text: "Clients need to learn better behavioral choices." },
            { id: 63, text: "å­˜åœ¨ä¸»ä¹‰ç„¦è™‘æ˜¯äººç±»ç»éªŒçš„æ ¸å¿ƒéƒ¨åˆ†ã€‚", eng_text: "Existential anxiety is a central part of the human experience." },
            { id: 64, text: "æ²»ç–—å¸ˆåº”è¯¥è€ƒè™‘ç¤¾ä¼šæ”¿æ²»å› ç´ å¦‚ä½•å½±å“æ¥è®¿è€…ã€‚", eng_text: "Therapists should consider how sociopolitical factors affect clients." },
            { id: 65, text: "æ²»ç–—åº”è¯¥å…³æ³¨è§£å†³æ–¹æ¡ˆè€Œéé—®é¢˜ã€‚", eng_text: "Therapy should focus on solutions rather than problems." },
            { id: 66, text: "ç§æ—å’Œæ–‡åŒ–èº«ä»½å¯¹å¿ƒç†å¥åº·æœ‰é‡è¦å½±å“ã€‚", eng_text: "Racial and cultural identity have important effects on mental health." },
            { id: 67, text: "è§‰å¯Ÿæ˜¯æ²»ç–—å˜åŒ–çš„æ ¸å¿ƒã€‚", eng_text: "Awareness is central to therapeutic change." },
            { id: 68, text: "è¡Œä¸ºæ”¹å˜éœ€è¦ç³»ç»Ÿçš„å¼ºåŒ–è®¡åˆ’ã€‚", eng_text: "Behavior change requires systematic reinforcement plans." },
            { id: 69, text: "æ•´åˆå¤šç§æ²»ç–—æ–¹æ³•æ¯”åšæŒå•ä¸€ç†è®ºæ›´æœ‰æ•ˆã€‚", eng_text: "Integrating multiple therapeutic approaches is more effective than adhering to a single theory." },
            { id: 70, text: "çµæ´»è¿ç”¨ä¸åŒç†è®ºæŠ€æœ¯å¯ä»¥æ›´å¥½åœ°æ»¡è¶³æ¥è®¿è€…çš„éœ€æ±‚ã€‚", eng_text: "Flexibly applying techniques from different theories better meets clients' needs." },
            { id: 71, text: "äººä»¬é€šè¿‡è®²è¿°å’Œé‡æ–°è®²è¿°ä»–ä»¬çš„ç”Ÿæ´»æ•…äº‹æ¥åˆ›é€ æ„ä¹‰ã€‚", eng_text: "People create meaning by telling and retelling their life stories." },
            { id: 72, text: "æ€§åˆ«è§’è‰²æœŸæœ›å¯¹å¿ƒç†å¥åº·æœ‰é‡å¤§å½±å“ã€‚", eng_text: "Gender role expectations have significant impacts on mental health." },
            { id: 73, text: "å®¶åº­ç³»ç»Ÿæ¯”ä¸ªä½“æ›´é‡è¦ã€‚", eng_text: "Family systems are more important than individuals." },
            { id: 74, text: "æ–‡åŒ–èƒŒæ™¯å¡‘é€ äº†äººä»¬çš„ä¸–ç•Œè§‚å’Œæ²»ç–—æœŸæœ›ã€‚", eng_text: "Cultural backgrounds shape people's worldviews and expectations for therapy." },
            { id: 75, text: "ç¤¾ä¼šä¸å¹³ç­‰ç›´æ¥å½±å“å¿ƒç†å¥åº·ã€‚", eng_text: "Social inequalities directly affect mental health." },
            { id: 76, text: "æƒåŠ›å…³ç³»åº”åœ¨æ²»ç–—ä¸­è¢«æ¢è®¨å’ŒæŒ‘æˆ˜ã€‚", eng_text: "Power relationships should be explored and challenged in therapy." }
        ];

        // é‡è¡¨åˆ†ç±»æ•°æ®
        const categories = [
            { name: "ç²¾ç¥åˆ†æ/å¿ƒç†åŠ¨åŠ›å­¦", items: [1, 21, 30, 57, 59] },
            { name: "é˜¿å¾·å‹’å­¦æ´¾", items: [2, 5, 18, 23, 37] },
            { name: "è¡Œä¸ºä¸»ä¹‰", items: [6, 10, 36, 39, 68] },
            { name: "è®¤çŸ¥ç–—æ³•", items: [7, 15, 31, 35, 40] },
            { name: "ç°å®æ²»ç–—", items: [9, 41, 42, 43, 62] },
            { name: "å­˜åœ¨ä¸»ä¹‰", items: [3, 13, 22, 24, 63] },
            { name: "äººæœ¬ä¸»ä¹‰", items: [11, 17, 26, 34, 61] },
            { name: "æ ¼å¼å¡”ç–—æ³•", items: [4, 14, 19, 58, 67] },
            { name: "å¤šå…ƒæ–‡åŒ–å’¨è¯¢", items: [54, 60, 64, 66, 74] },
            { name: "å¥³æ€§ä¸»ä¹‰æ²»ç–—", items: [12, 52, 72, 75, 76] },
            { name: "å®¶åº­æ²»ç–—", items: [20, 25, 28, 51, 73] },
            { name: "è§£å†³æ–¹æ¡ˆèšç„¦æ²»ç–—", items: [16, 38, 46, 48, 65] },
            { name: "å™äº‹æ²»ç–—", items: [45, 47, 49, 50, 71] },
            { name: "ä¼˜åŠ¿æœ¬ä½æ²»ç–—", items: [29, 44, 53, 55, 56] },
            { name: "æ•´åˆæ²»ç–—æ–¹æ³•", items: [27, 33, 32, 69, 70] }
        ];

        // å½“å‰ä½¿ç”¨çš„é—®é¢˜æ•°ç»„ï¼ˆå¯èƒ½æ˜¯åŸå§‹é¡ºåºæˆ–æ‰“ä¹±åçš„é¡ºåºï¼‰
        let questions = [...originalQuestions];
        
        // ç”Ÿæˆé—®å·
        function generateQuestionnaire() {
            const container = document.getElementById('questionnaire');
            container.innerHTML = '';
            
            questions.forEach(question => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                
                const questionText = document.createElement('div');
                questionText.innerHTML = `<span class="question-number">${question.id}.</span> ${question.text}`;
                questionDiv.appendChild(questionText);
                
                // æ·»åŠ è‹±æ–‡é—®é¢˜
                const engQuestionText = document.createElement('div');
                engQuestionText.className = 'eng-question';
                engQuestionText.innerHTML = `<span class="eng-text">${question.eng_text}</span>`;
                engQuestionText.style.color = '#666';
                engQuestionText.style.fontSize = '0.9em';
                engQuestionText.style.fontStyle = 'italic';
                engQuestionText.style.marginTop = '5px';
                questionDiv.appendChild(engQuestionText);
                
                const options = document.createElement('div');
                options.className = 'options';
                
                // ä¸ºç¬¬12é¢˜æ·»åŠ ç‰¹æ®Šçš„'01'é€‰é¡¹
                if (question.id === 12) {
                    // æ·»åŠ ç‰¹æ®Šçš„'01'é€‰é¡¹
                    const option01 = document.createElement('div');
                    option01.className = 'option special-option';
                    
                    const label01 = document.createElement('label');
                    const radio01 = document.createElement('input');
                    radio01.type = 'radio';
                    radio01.name = `q${question.id}`;
                    radio01.value = 1; // å€¼ç­‰äº1
                    radio01.dataset.questionId = question.id;
                    radio01.dataset.special = 'true';
                    
                    // æ·»åŠ ç‰¹æ®Šæ ·å¼
                    label01.style.color = '#ff5252';
                    label01.style.animation = 'colorChange 4s infinite';
                    label01.style.fontWeight = 'bold';
                    label01.style.fontSize = '1.2em';
                    label01.style.textShadow = '0 0 5px rgba(255, 82, 82, 0.7)';
                    label01.style.padding = '3px 8px';
                    label01.style.borderRadius = '5px';
                    label01.style.border = '1px dashed #ff5252';
                    label01.style.boxShadow = '0 0 8px rgba(255, 82, 82, 0.5)';
                    
                    // æ·»åŠ changeäº‹ä»¶ç›‘å¬å™¨ï¼Œæ ‡è®°å·²å›ç­”çš„é—®é¢˜å¹¶è§¦å‘å½©è›‹
                    radio01.addEventListener('change', function() {
                        const questionDiv = this.closest('.question');
                        questionDiv.classList.add('answered');
                        updateProgressBar();
                        showSpecialEasterEgg();
                    });
                    
                    label01.appendChild(radio01);
                    label01.appendChild(document.createTextNode('01'));
                    option01.appendChild(label01);
                    options.appendChild(option01);
                }
                
                for (let i = 1; i <= 7; i++) {
                    const option = document.createElement('div');
                    option.className = 'option';
                    
                    const label = document.createElement('label');
                    const radio = document.createElement('input');
                    radio.type = 'radio';
                    radio.name = `q${question.id}`;
                    radio.value = i;
                    radio.dataset.questionId = question.id;
                    
                    // æ·»åŠ changeäº‹ä»¶ç›‘å¬å™¨ï¼Œæ ‡è®°å·²å›ç­”çš„é—®é¢˜
                    radio.addEventListener('change', function() {
                        const questionDiv = this.closest('.question');
                        questionDiv.classList.add('answered');
                        updateProgressBar();
                    });
                    
                    label.appendChild(radio);
                    label.appendChild(document.createTextNode(i));
                    option.appendChild(label);
                    options.appendChild(option);
                }
                
                questionDiv.appendChild(options);
                container.appendChild(questionDiv);
            });
        }

        // è®¡ç®—ç»“æœ
        function calculateResults() {
            const results = {};
            let calculationDetails = "<h3>è®¡ç®—è¿‡ç¨‹</h3>";
            
            // åˆå§‹åŒ–æ¯ä¸ªç±»åˆ«çš„å¾—åˆ†ä¸º0
            categories.forEach(category => {
                results[category.name] = 0;
            });
            
            // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰é—®é¢˜éƒ½å·²å›ç­”
            let allAnswered = true;
            let unansweredQuestions = [];
            
            questions.forEach(question => {
                const radios = document.getElementsByName(`q${question.id}`);
                let answered = false;
                let questionDiv = null;
                
                for (let i = 0; i < radios.length; i++) {
                    if (radios[i].checked) {
                        answered = true;
                        questionDiv = radios[i].closest('.question');
                        break;
                    }
                }
                
                // æ ‡è®°å·²å›ç­”çš„é—®é¢˜
                if (answered && questionDiv) {
                    questionDiv.classList.add('answered');
                }
                
                if (!answered) {
                    allAnswered = false;
                    unansweredQuestions.push(question.id);
                }
            });
            
            if (!allAnswered) {
                alert(`è¯·å›ç­”æ‰€æœ‰é—®é¢˜ï¼æœªå›ç­”çš„é—®é¢˜: ${unansweredQuestions.join(', ')}`);
                
                // æ‰¾åˆ°ç¬¬ä¸€ä¸ªæœªå›ç­”çš„é—®é¢˜å¹¶æ»šåŠ¨åˆ°è¯¥ä½ç½®
                const firstUnansweredId = unansweredQuestions[0];
                const firstUnansweredQuestion = document.querySelector(`.question input[data-question-id="${firstUnansweredId}"]`);
                
                if (firstUnansweredQuestion) {
                    const questionDiv = firstUnansweredQuestion.closest('.question');
                    questionDiv.scrollIntoView({ behavior: 'smooth' });
                    firstUnansweredQuestion.focus();
                }
                
                return;
            }
            
            // è®¡ç®—æ¯ä¸ªç±»åˆ«çš„å¾—åˆ†
            categories.forEach(category => {
                calculationDetails += `<h4>${category.name}</h4><div class="calculation">`;
                
                category.items.forEach(itemId => {
                    const radios = document.getElementsByName(`q${itemId}`);
                    let value = 0;
                    
                    for (let i = 0; i < radios.length; i++) {
                        if (radios[i].checked) {
                            value = parseInt(radios[i].value);
                            break;
                        }
                    }
                    
                    results[category.name] += value;
                    calculationDetails += `é—®é¢˜ ${itemId}: ${value} åˆ†<br>`;
                });
                
                calculationDetails += `æ€»åˆ†: ${results[category.name]} (${category.items.join(' + ')} = ${results[category.name]})<br></div>`;
            });
            
            // æ˜¾ç¤ºç»“æœ
            document.getElementById('calculation-details').innerHTML = calculationDetails;
            
            const resultsTable = document.getElementById('results-table').getElementsByTagName('tbody')[0];
            resultsTable.innerHTML = '';
            
            // æ‰¾å‡ºæœ€é«˜åˆ†
            let maxScore = 0;
            Object.values(results).forEach(score => {
                if (score > maxScore) {
                    maxScore = score;
                }
            });
            
            // æŒ‰å¾—åˆ†ä»é«˜åˆ°ä½æ’åºå¹¶æ˜¾ç¤ºç»“æœ
            Object.entries(results)
                .sort((a, b) => b[1] - a[1])
                .forEach(([category, score]) => {
                    const row = resultsTable.insertRow();
                    if (score === maxScore) {
                        row.className = 'highest';
                    }
                    
                    const cellCategory = row.insertCell(0);
                    const cellScore = row.insertCell(1);
                    
                    cellCategory.textContent = category;
                    cellScore.textContent = score;
                });
            
            document.getElementById('results').style.display = 'block';
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        // æ›´æ–°è¿›åº¦æ¡
        function updateProgressBar() {
            const totalQuestions = questions.length;
            let answeredQuestions = 0;
            
            questions.forEach(question => {
                const radios = document.getElementsByName(`q${question.id}`);
                for (let i = 0; i < radios.length; i++) {
                    if (radios[i].checked) {
                        answeredQuestions++;
                        break;
                    }
                }
            });
            
            const progressPercentage = (answeredQuestions / totalQuestions) * 100;
            document.querySelector('.progress-bar').style.width = `${progressPercentage}%`;
            document.querySelector('.progress-text').textContent = `${answeredQuestions}/${totalQuestions}`;
        }
        
        // æ‰“ä¹±é¢˜ç›®é¡ºåº
        function shuffleQuestions() {
            // ä¿å­˜å½“å‰ç­”æ¡ˆ
            const answers = saveCurrentAnswers();
            
            // æ‰“ä¹±é—®é¢˜é¡ºåº
            questions = [...originalQuestions];
            for (let i = questions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [questions[i], questions[j]] = [questions[j], questions[i]];
            }
            
            // é‡æ–°ç”Ÿæˆé—®å·
            generateQuestionnaire();
            
            // æ¢å¤ä¹‹å‰çš„ç­”æ¡ˆ
            restoreAnswers(answers);
            
            // æ›´æ–°è¿›åº¦æ¡
            updateProgressBar();
            
            // é‡æ–°è®¾ç½®é”®ç›˜å¯¼èˆª
            setupKeyboardNavigation();
        }
        
        // æ¢å¤é»˜è®¤é¢˜ç›®é¡ºåº
        function restoreDefaultOrder() {
            // ä¿å­˜å½“å‰ç­”æ¡ˆ
            const answers = saveCurrentAnswers();
            
            // æ¢å¤åŸå§‹é¡ºåº
            questions = [...originalQuestions];
            
            // é‡æ–°ç”Ÿæˆé—®å·
            generateQuestionnaire();
            
            // æ¢å¤ä¹‹å‰çš„ç­”æ¡ˆ
            restoreAnswers(answers);
            
            // æ›´æ–°è¿›åº¦æ¡
            updateProgressBar();
            
            // é‡æ–°è®¾ç½®é”®ç›˜å¯¼èˆª
            setupKeyboardNavigation();
        }
        
        // ä¿å­˜å½“å‰ç­”æ¡ˆ
        function saveCurrentAnswers() {
            const answers = {};
            originalQuestions.forEach(question => {
                const radios = document.getElementsByName(`q${question.id}`);
                for (let i = 0; i < radios.length; i++) {
                    if (radios[i].checked) {
                        answers[question.id] = radios[i].value;
                        break;
                    }
                }
            });
            return answers;
        }
        
        // æ¢å¤ç­”æ¡ˆ
        function restoreAnswers(answers) {
            Object.keys(answers).forEach(questionId => {
                const radios = document.getElementsByName(`q${questionId}`);
                const value = answers[questionId];
                for (let i = 0; i < radios.length; i++) {
                    if (radios[i].value === value) {
                        radios[i].checked = true;
                        const questionDiv = radios[i].closest('.question');
                        questionDiv.classList.add('answered');
                        break;
                    }
                }
            });
        }
        
        // ç‰¹æ®Šå½©è›‹æ˜¾ç¤ºå‡½æ•°
        function showSpecialEasterEgg() {
            // åˆ›å»ºå½©è›‹å…ƒç´ 
            const easterEgg = document.createElement('div');
            easterEgg.className = 'easter-egg';
            easterEgg.style.position = 'fixed';
            easterEgg.style.top = '0';
            easterEgg.style.left = '0';
            easterEgg.style.width = '100%';
            easterEgg.style.height = '100%';
            easterEgg.style.backgroundColor = 'rgba(255, 255, 255, 0.9)';
            easterEgg.style.display = 'flex';
            easterEgg.style.flexDirection = 'column';
            easterEgg.style.justifyContent = 'center';
            easterEgg.style.alignItems = 'center';
            easterEgg.style.zIndex = '2000';
            easterEgg.style.color = '#FF6347'; // æ©™çº¢è‰²
            easterEgg.style.textAlign = 'center';
            easterEgg.style.padding = '20px';
            easterEgg.style.animation = 'fadeIn 0.5s';
            
            // æ·»åŠ æ ·å¼
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @keyframes fadeOut {
                    from { opacity: 1; }
                    to { opacity: 0; }
                }
                @keyframes colorChange {
                    0% { color: #ff5252; }
                    25% { color: #ffeb3b; }
                    50% { color: #4caf50; }
                    75% { color: #2196f3; }
                    100% { color: #ff5252; }
                }
                @keyframes blink {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0.5; }
                }
                .easter-egg-title {
                    font-size: 2.5em;
                    margin-bottom: 20px;
                    font-weight: bold;
                    animation: colorChange 4s infinite;
                }
                .easter-egg-content {
                    font-size: 1.5em;
                    margin-bottom: 30px;
                    line-height: 1.6;
                }
                .easter-egg-credit {
                    font-size: 1.2em;
                    margin-top: 20px;
                    font-style: italic;
                }
                .easter-egg-hint {
                    font-size: 0.9em;
                    margin-top: 10px;
                    color: #666;
                }
                .easter-egg-close {
                    margin-top: 30px;
                    padding: 10px 20px;
                    background-color: #3498db;
                    color: white;
                    border: none;
                    border-radius: 5px;
                    cursor: pointer;
                    font-size: 1em;
                    transition: background-color 0.3s;
                }
                .easter-egg-close:hover {
                    background-color: #2980b9;
                }
                .cake-icon {
                    font-size: 3em;
                    margin-bottom: 20px;
                }
            `;
            document.head.appendChild(style);
            
            // è®¾ç½®å½©è›‹å†…å®¹
            easterEgg.innerHTML = `
                <div class="cake-icon">ğŸ‚</div>
                <div class="easter-egg-title">âœ¨ è¯¸äº‹çš†å®œ âœ¨</div>
                <div class="easter-egg-content">
                    æ˜å¤©ä¼šæ˜¯å¥½å¤©æ°”<br>
                    é€‚åˆå¤§æ­¥çš„ å‰è¿›~
                </div>
                <div class="easter-egg-credit">ç”±ã€Œç‰›äººã€å€¾æƒ…å¼€å‘<br> ğŸ‚ January 12, 2005 ğŸ‚</div>
                <div class="easter-egg-hint">æç¤ºï¼šå¯é€šè¿‡æ•°å­—é”®ç›˜è¾“å…¥4ä½ç”Ÿæ—¥æ—¥æœŸå¯»æ‰¾å½©è›‹2</div>
                <button class="easter-egg-close">å¥½è¯¶</button>
            `;
            
            document.body.appendChild(easterEgg);
            
            // æ·»åŠ å…³é—­æŒ‰é’®äº‹ä»¶
            easterEgg.querySelector('.easter-egg-close').addEventListener('click', function() {
                easterEgg.style.animation = 'fadeOut 0.5s';
                setTimeout(() => {
                    document.body.removeChild(easterEgg);
                }, 500);
            });
        }
        
        // å­˜å‚¨é”®ç›˜å¯¼èˆªäº‹ä»¶ç›‘å¬å™¨çš„å¼•ç”¨
        let keyboardNavigationHandler = null;
        
        // æ·»åŠ é”®ç›˜æ“ä½œæ”¯æŒ
        function setupKeyboardNavigation() {
            // ä¸ºæ¯ä¸ªé—®é¢˜æ·»åŠ é”®ç›˜å¯¼èˆª
            const questionDivs = document.querySelectorAll('.question');
            
            // ç§»é™¤æ‰€æœ‰current-focusç±»
            document.querySelectorAll('.current-focus').forEach(el => {
                el.classList.remove('current-focus');
            });
            
            // å¦‚æœå·²å­˜åœ¨é”®ç›˜å¯¼èˆªäº‹ä»¶ç›‘å¬å™¨ï¼Œå…ˆç§»é™¤å®ƒ
            if (keyboardNavigationHandler) {
                document.removeEventListener('keydown', keyboardNavigationHandler);
            }
            
            // åˆ›å»ºæ–°çš„é”®ç›˜å¯¼èˆªäº‹ä»¶å¤„ç†å‡½æ•°
            keyboardNavigationHandler = function(e) {
                // å½“å‰èšç„¦çš„å…ƒç´ 
                const activeElement = document.activeElement;
                const isRadioButton = activeElement.tagName === 'INPUT' && activeElement.type === 'radio';
                
                // æ•°å­—é”®1-7é€‰æ‹©é€‰é¡¹
                if (e.key >= '1' && e.key <= '7' && isRadioButton) {
                    const questionName = activeElement.name;
                    const radios = document.getElementsByName(questionName);
                    const selectedIndex = parseInt(e.key) - 1;
                    radios[selectedIndex].checked = true;
                    
                    // æ·»åŠ é€‰ä¸­æ•ˆæœ
                    const questionDiv = activeElement.closest('.question');
                    questionDiv.classList.add('answered');
                    
                    // æ£€æŸ¥æ˜¯å¦æ˜¯ç¬¬12é¢˜çš„01é€‰é¡¹
                    if (questionName === 'q12' && e.key === '1' && radios[0].dataset.special === 'true') {
                        showSpecialEasterEgg();
                    }
                    
                    updateProgressBar();
                    e.preventDefault();
                }
                
                // ä¸Šä¸‹é”®å¯¼èˆªé—®é¢˜ - ä¿®æ”¹ä¸ºä½¿ç”¨å½“å‰æ˜¾ç¤ºé¡ºåºè€ŒéåŸå§‹é¡ºåº
                if ((e.key === 'ArrowDown' || e.key === 'ArrowUp') && isRadioButton) {
                    const currentQuestion = activeElement.closest('.question');
                    
                    // è·å–æ‰€æœ‰å½“å‰æ˜¾ç¤ºçš„é—®é¢˜ï¼ŒæŒ‰ç…§DOMé¡ºåº
                    const allVisibleQuestions = Array.from(document.querySelectorAll('.question'));
                    const currentIndex = allVisibleQuestions.indexOf(currentQuestion);
                    
                    if (currentIndex !== -1) {
                        let targetIndex;
                        if (e.key === 'ArrowDown' && currentIndex < allVisibleQuestions.length - 1) {
                            targetIndex = currentIndex + 1;
                        } else if (e.key === 'ArrowUp' && currentIndex > 0) {
                            targetIndex = currentIndex - 1;
                        }
                        
                        if (targetIndex !== undefined) {
                            const targetQuestion = allVisibleQuestions[targetIndex];
                            const targetRadios = targetQuestion.querySelectorAll('input[type="radio"]');
                            if (targetRadios.length > 0) {
                                // æ‰¾åˆ°å½“å‰é€‰ä¸­çš„ç´¢å¼•
                                let currentOptionIndex = 0;
                                const currentRadios = currentQuestion.querySelectorAll('input[type="radio"]');
                                for (let i = 0; i < currentRadios.length; i++) {
                                    if (currentRadios[i] === activeElement) {
                                        currentOptionIndex = i;
                                        break;
                                    }
                                }
                                targetRadios[currentOptionIndex].focus();
                                e.preventDefault();
                            }
                        }
                    }
                }
                
                // å·¦å³é”®åœ¨é€‰é¡¹é—´å¯¼èˆª
                if ((e.key === 'ArrowLeft' || e.key === 'ArrowRight') && isRadioButton) {
                    const questionName = activeElement.name;
                    const radios = document.getElementsByName(questionName);
                    let currentIndex = -1;
                    
                    for (let i = 0; i < radios.length; i++) {
                        if (radios[i] === activeElement) {
                            currentIndex = i;
                            break;
                        }
                    }
                    
                    if (currentIndex !== -1) {
                        let targetIndex;
                        if (e.key === 'ArrowLeft' && currentIndex > 0) {
                            targetIndex = currentIndex - 1;
                        } else if (e.key === 'ArrowRight' && currentIndex < radios.length - 1) {
                            targetIndex = currentIndex + 1;
                        }
                        
                        if (targetIndex !== undefined) {
                            radios[targetIndex].focus();
                            e.preventDefault();
                        }
                    }
                }
            };
            
            // æ·»åŠ æ–°çš„é”®ç›˜å¯¼èˆªäº‹ä»¶ç›‘å¬å™¨
            document.addEventListener('keydown', keyboardNavigationHandler);
            
            // ä¸ºæ¯ä¸ªå•é€‰æŒ‰é’®æ·»åŠ changeäº‹ä»¶
            const allRadios = document.querySelectorAll('input[type="radio"]');
            allRadios.forEach(radio => {
                radio.addEventListener('change', updateProgressBar);
            });
            
            // è®¾ç½®ç¬¬ä¸€ä¸ªé—®é¢˜çš„ç¬¬ä¸€ä¸ªé€‰é¡¹ä¸ºåˆå§‹ç„¦ç‚¹
            if (questionDivs.length > 0) {
                const firstRadio = questionDivs[0].querySelector('input[type="radio"]');
                if (firstRadio) {
                    firstRadio.focus();
                    firstRadio.closest('.question').classList.add('current-focus');
                }
            }
        }
        
        // æ·»åŠ ç„¦ç‚¹å˜åŒ–ç›‘å¬
        document.addEventListener('focusin', function(e) {
            if (e.target.tagName === 'INPUT' && e.target.type === 'radio') {
                // ç§»é™¤æ‰€æœ‰current-focusç±»
                document.querySelectorAll('.current-focus').forEach(el => {
                    el.classList.remove('current-focus');
                });
                
                // ä¸ºå½“å‰ç„¦ç‚¹é—®é¢˜æ·»åŠ current-focusç±»
                const questionDiv = e.target.closest('.question');
                if (questionDiv) {
                    questionDiv.classList.add('current-focus');
                }
            }
        });
        
        // åˆå§‹åŒ–é¡µé¢
        document.addEventListener('DOMContentLoaded', function() {
            generateQuestionnaire();
            document.getElementById('calculate').addEventListener('click', calculateResults);
            document.getElementById('shuffle').addEventListener('click', shuffleQuestions);
            document.getElementById('restore').addEventListener('click', restoreDefaultOrder);
            document.getElementById('test-fill').addEventListener('click', testFill);
            setupKeyboardNavigation();
            setupEasterEgg();
        });
        
        // ä¸€é”®æµ‹è¯•å¡«å……åŠŸèƒ½
        function testFill() {
            const pattern = [0, 0, 1]; // æµ‹è¯•å¡«å……æ¨¡å¼æ”¹ä¸º0112
            
            questions.forEach((question, index) => {
                const patternIndex = index % pattern.length;
                const value = pattern[patternIndex] + 1; // è½¬æ¢ä¸º1-7çš„èŒƒå›´
                
                // é€‰ä¸­å¯¹åº”çš„å•é€‰æŒ‰é’®
                const radios = document.getElementsByName(`q${question.id}`);
                if (radios && radios.length >= value) {
                    radios[value - 1].checked = true;
                    const questionDiv = radios[0].closest('.question');
                    questionDiv.classList.add('answered');
                }
            });
            
            // æ›´æ–°è¿›åº¦æ¡
            updateProgressBar();
        }
        
        // å½©è›‹åŠŸèƒ½
        function setupEasterEgg() {
            let keySequence = [];
            const targetSequence = ['0', '1', '1', '2'];
            
            document.addEventListener('keydown', function(e) {
                // åªåœ¨æ²¡æœ‰è¾“å…¥æ¡†èšç„¦æ—¶è§¦å‘
                if (document.activeElement.tagName !== 'INPUT') {
                    keySequence.push(e.key);
                    
                    // åªä¿ç•™æœ€å4ä¸ªæŒ‰é”®
                    if (keySequence.length > 4) {
                        keySequence.shift();
                    }
                    
                    // æ£€æŸ¥æ˜¯å¦åŒ¹é…ç›®æ ‡åºåˆ—
                    if (keySequence.join('') === targetSequence.join('')) {
                        showEasterEgg();
                        keySequence = []; // é‡ç½®åºåˆ—
                    }
                }
            });
        }
        
        // æ˜¾ç¤ºå½©è›‹
        function showEasterEgg() {
            // åˆ›å»ºå½©è›‹å…ƒç´ 
            const easterEgg = document.createElement('div');
            easterEgg.className = 'easter-egg';
            easterEgg.style.position = 'fixed';
            easterEgg.style.top = '0';
            easterEgg.style.left = '0';
            easterEgg.style.width = '100%';
            easterEgg.style.height = '100%';
            easterEgg.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';
            easterEgg.style.display = 'flex';
            easterEgg.style.flexDirection = 'column';
            easterEgg.style.justifyContent = 'center';
            easterEgg.style.alignItems = 'center';
            easterEgg.style.zIndex = '2000';
            easterEgg.style.color = 'white';
            easterEgg.style.textAlign = 'center';
            easterEgg.style.padding = '20px';
            easterEgg.style.animation = 'fadeIn 0.5s';
            
            // æ·»åŠ æ ·å¼
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @keyframes colorChange {
                    0% { color: #ff5252; }
                    25% { color: #ffeb3b; }
                    50% { color: #4caf50; }
                    75% { color: #2196f3; }
                    100% { color: #ff5252; }
                }
                .easter-egg-title {
                    font-size: 2.5em;
                    margin-bottom: 20px;
                    font-weight: bold;
                    animation: colorChange 4s infinite;
                }
                .easter-egg-content {
                    font-size: 1.5em;
                    margin-bottom: 30px;
                    line-height: 1.6;
                }
                .easter-egg-credit {
                    font-size: 1.2em;
                    margin-top: 20px;
                    font-style: italic;
                }
                .easter-egg-close {
                    margin-top: 30px;
                    padding: 10px 20px;
                    background-color: #3498db;
                    color: white;
                    border: none;
                    border-radius: 5px;
                    cursor: pointer;
                    font-size: 1em;
                    transition: background-color 0.3s;
                }
                .easter-egg-close:hover {
                    background-color: #2980b9;
                }
            `;
            document.head.appendChild(style);
            
            // è®¾ç½®å½©è›‹å†…å®¹
            easterEgg.innerHTML = `
                <div class="easter-egg-title">âœ¨ è¯¸äº‹çš†å®œ âœ¨</div>
                <div class="easter-egg-content">
                    æ€»æœ‰äººåœ¨ä¹<br>
                    æ€»æœ‰äººç¾¡æ…•<br>
                    æ€»æœ‰äººä¸ä½ åŒè·¯
                </div>
                <div class="easter-egg-credit">ç”±ã€Œç‰›äººã€å€¾æƒ…å¼€å‘<br> ğŸ‚ 0112 ğŸ‚</div>
                <div class="easter-egg-hint">æç¤ºï¼šå¯é€šè¿‡12é¢˜é€‰é¡¹å¯»æ‰¾å½©è›‹1</div>
                <button class="easter-egg-close">å¥½è¯¶</button>
            `;
            
            document.body.appendChild(easterEgg);
            
            // æ·»åŠ å…³é—­æŒ‰é’®äº‹ä»¶
            easterEgg.querySelector('.easter-egg-close').addEventListener('click', function() {
                easterEgg.style.animation = 'fadeOut 0.5s';
                setTimeout(() => {
                    document.body.removeChild(easterEgg);
                }, 500);
            });
        }
    </script>
    <script src="guide.js"></script>
</body>
</html>
<div class="therapy-intro">
    <h3>æ¥è‡ªdeepseekçš„æµæ´¾é”è¯„</h3>
    <ul>
        <ul>
            <ul>
                <li><strong>ç²¾ç¥åˆ†æ/å¿ƒç†åŠ¨åŠ›å­¦:</strong> "åƒè€ƒå¤å­¦å®¶ä¸€æ ·æŒ–æ˜è®°å¿†ç¢ç‰‡ï¼Œç«¥å¹´ç»å†å¯èƒ½æ¯”ä½ å®¶çš„æ—§ç›¸å†Œè¿˜ç²¾å½©ï¼"</li>
                <li><strong>é˜¿å¾·å‹’å­¦æ´¾:</strong> "äººç”Ÿä¸æ˜¯å•æœºæ¸¸æˆï¼Œä½ çš„ç¤¾ä¼šé˜Ÿå‹å’Œæˆé•¿ä»»åŠ¡å·²åŠ å…¥ç¾¤èŠ~"</li>
                <li><strong>è¡Œä¸ºä¸»ä¹‰:</strong> "ç»™è¡Œä¸ºè£…ä¸ªGPSï¼šå¥–åŠ±æ˜¯åŠ æ²¹ç«™ï¼Œæƒ©ç½šæ˜¯ç»•è·¯æé†’"</li>
                <li><strong>è®¤çŸ¥ç–—æ³•:</strong> "ç»™å¤§è„‘å®‰è£…æ€ç»´æ»¤é•œï¼ŒæŠŠ'å®Œè›‹äº†'è‡ªåŠ¨ç¿»è¯‘æˆ'æœ‰ç‚¹æŒ‘æˆ˜'"</li>
                <li><strong>ç°å®æ²»ç–—:</strong> "æ´»åœ¨å½“ä¸‹æ¨¡å¼å·²å¯åŠ¨ï¼Œè´£ä»»æ‹…å½“æ­£åœ¨åŠ è½½ä¸­..."</li>
                <li><strong>å­˜åœ¨ä¸»ä¹‰:</strong> "å“²å­¦å’–å•¡é¦†è¥ä¸šä¸­ï¼Œä»Šå¤©çš„ç‰¹è°ƒæ˜¯'è‡ªç”±ä¸æ„ä¹‰æµ“ç¼©å’–å•¡'"</li>
                <li><strong>äººæœ¬ä¸»ä¹‰:</strong> "ä½ çš„äººç”ŸèŠ±å›­ï¼Œæˆ‘ä»¬åªè´Ÿè´£æµ‡æ°´ï¼Œå¼€èŠ±çš„äº‹äº¤ç»™é˜³å…‰å’Œä½ "</li>
                <li><strong>æ ¼å¼å¡”ç–—æ³•:</strong> "æ­¤åˆ»ä½“éªŒå€¼MAXï¼æœªå®Œæˆäº‹é¡¹æ­£åœ¨ç”Ÿæˆå…¨æ¯æŠ•å½±..."</li>
                <li><strong>å¤šå…ƒæ–‡åŒ–å’¨è¯¢:</strong> "ä¸–ç•Œæ˜¯ä¸ªè°ƒè‰²ç›˜ï¼Œä½ çš„æ–‡åŒ–åº•è‰²æ­£åœ¨ç”Ÿæˆä¸“å±è‰²è°±"</li>
                <li><strong>å¥³æ€§ä¸»ä¹‰æ²»ç–—:</strong> "æ£€æµ‹åˆ°ç³»ç»Ÿé»˜è®¤è®¾ç½®ï¼Œæ˜¯å¦ä¸ªæ€§åŒ–åŠ è½½ï¼Ÿ"</li>
                <li><strong>å®¶åº­æ²»ç–—:</strong> "å®¶åº­å…³ç³»åƒWi-Fiä¿¡å·ï¼Œç°åœ¨å¼€å§‹ä¼˜åŒ–æ¯ä¸ªäººçš„è¿æ¥é¢‘é“"</li>
                <li><strong>è§£å†³æ–¹æ¡ˆèšç„¦æ²»ç–—:</strong> "é—®é¢˜ï¼Ÿä¸å­˜åœ¨çš„ï¼æˆ‘ä»¬åªæ˜¯è¿˜æ²¡æ‰¾åˆ°è—é’¥åŒ™çš„æ­£ç¡®èŠ±ç›†"</li>
                <li><strong>å™äº‹æ²»ç–—:</strong> "æ•…äº‹ç¼–è¾‘æ¨¡å¼å¯åŠ¨ï¼Œåæ´¾è§’è‰²æ­£åœ¨è½¬åŒ–ä¸ºæˆé•¿NPC"</li>
                <li><strong>ä¼˜åŠ¿æœ¬ä½æ²»ç–—:</strong> "ä½ çš„è¶…èƒ½åŠ›å·²åˆ°è´¦ï¼Œè¯·æŸ¥æ”¶éšè—æŠ€èƒ½ä½¿ç”¨è¯´æ˜ä¹¦"</li>
                <li><strong>æ•´åˆæ²»ç–—æ–¹æ³•:</strong> "å¿ƒç†å·¥å…·ç®±å·²å‡çº§ï¼Œç°åœ¨æ”¯æŒå¤šæµæ´¾ç»„åˆæŠ€ï¼"</li>
            </ul>
</ul>
    </ul>
</div>
<style>
    .therapy-intro {
        background-color: #fff;
        padding: 15px;
        border-radius: 5px;
        margin-top: 20px;
    }
    .therapy-intro h3 {
        color: #2c3e50;
        text-align: center;
    }
    .therapy-intro ul {
        list-style-type: none;
        padding: 0;
    }
    .therapy-intro li {
        margin-bottom: 10px;
    }
    .therapy-intro strong {
        color: #3498db;
    }
</style>
</body>
</html>
</html>
